/* */ 
"format cjs";
System.register(["angular2/core"],function(l,n){var f=this&&this.__decorate||function(b,a,d,h){var e=arguments.length,c=3>e?a:null===h?h=Object.getOwnPropertyDescriptor(a,d):h,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(b,a,d,h);else for(var g=b.length-1;0<=g;g--)if(f=b[g])c=(3>e?f(c):3<e?f(a,d,c):f(a,d))||c;return 3<e&&c&&Object.defineProperty(a,d,c),c},e=this&&this.__metadata||function(b,a){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(b,
a)},c,g,k,m;return{setters:[function(b){c=b}],execute:function(){g=function(){return function(){}}();l("BoundingRectClass",g);k=function(){return function(b,a){this.type=b;this.instance=a}}();l("EventSlideAble",k);m=function(){function b(a,d){this.el=a;this.renderer=d;this.step=1;this.parent=null;this.startSlidingEvent=new c.EventEmitter;this.slidingEvent=new c.EventEmitter;this.stopSlidingEvent=new c.EventEmitter;this.initEvent=new c.EventEmitter;this.signatures={top:"",left:"",bottom:"",right:""};
this.dynamicLimits={};this.lastY=this.lastX=this.checkYBeforeRedraw=this.checkXBeforeRedraw=null;console.log("SliadableDirective")}Object.defineProperty(b.prototype,"boundElement",{set:function(a){this.signatures={top:a+":top",bottom:a+":bottom",left:a+":left",right:a+":right"}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"rightEdge",{set:function(a){this.signatures.right=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"leftEdge",{set:function(a){this.signatures.left=
a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"topEdge",{set:function(a){this.signatures.top=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bottomEdge",{set:function(a){this.signatures.bottom=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dynamicRightLimit",{set:function(a){this.dynamicLimits.right=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dynamicLeftLimit",{set:function(a){this.dynamicLimits.left=a},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dynamicTopLimit",{set:function(a){this.dynamicLimits.top=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dynamicBottomLimit",{set:function(a){this.dynamicLimits.bottom=a},enumerable:!0,configurable:!0});b.prototype.ngOnInit=function(){this.dynamicLimitRect=this.dynamicLimitRect||new g;this.direction=this.direction||"both";this.signatures.left||(this.signatures.left="parent:left");this.signatures.right||(this.signatures.right=
"parent:right");this.signatures.top||(this.signatures.top="parent:top");this.signatures.bottom||(this.signatures.bottom="parent:bottom");this.initEvent.emit(new k("init",this))};b.prototype.ngAfterViewInit=function(){if(this.normalStyle)for(var a in this.normalStyle)this.renderer.setElementStyle(this.el.nativeElement,a,this.normalStyle[a]);if(this.slidingStyle)for(a in this.backupStyle={},this.slidingStyle){var d=window.getComputedStyle(this.el.nativeElement).getPropertyValue(a);d||(d=this.el.nativeElement.style[a]);
this.backupStyle[a]=d}};b.prototype.slideStart=function(a){document.ondragstart=function(){return!1};document.body.onselectstart=function(){return!1};this.calcDynamicLimits();document.onmousemove=function(a){this.redraw(a.clientX,a.clientY)}.bind(this);document.onmouseup=this.slideStop.bind(this);this.lastX||"vartical"!=this.direction||(this.lastX=this.el.nativeElement.getBoundingClientRect().left-parseInt(getComputedStyle(this.el.nativeElement).left)+Math.round(this.el.nativeElement.getBoundingClientRect().width/
2),isNaN(this.lastX)&&(this.lastX=Math.round(this.el.nativeElement.getBoundingClientRect().width/2)));this.lastY||"horisontal"!=this.direction||(this.lastY=this.el.nativeElement.getBoundingClientRect().top-parseInt(getComputedStyle(this.el.nativeElement).top)+Math.round(this.el.nativeElement.getBoundingClientRect().height/2),isNaN(this.lastY)&&(this.lastY=Math.round(this.el.nativeElement.getBoundingClientRect().height/2)));if(this.slidingStyle){for(var d in this.slidingStyle)this.renderer.setElementStyle(this.el.nativeElement,
d,this.slidingStyle[d]);this.lastX&&(this.el.nativeElement.style.left=this.lastX-this.zeroLeft-Math.round(this.el.nativeElement.getBoundingClientRect().width/2)+"px");this.lastY&&(this.el.nativeElement.style.top=this.lastY-this.zeroTop-Math.round(this.el.nativeElement.getBoundingClientRect().height/2)+"px")}this.startSlidingEvent.emit(this.prepareEventData("start"))};b.prototype.redraw=function(a,d){this.boundingRect||(this.boundingRect=new g,this.calcMargins());"undefined"===typeof this.zeroLeft&&
(this.zeroLeft=this.el.nativeElement.getBoundingClientRect().left-parseInt(getComputedStyle(this.el.nativeElement).left),isNaN(this.zeroLeft)&&(this.zeroLeft=0));"undefined"===typeof this.zeroTop&&(this.zeroTop=this.el.nativeElement.getBoundingClientRect().top-parseInt(getComputedStyle(this.el.nativeElement).top),isNaN(this.zeroTop)&&(this.zeroTop=0));if("horisontal"==this.direction||"both"==this.direction){if(this.lastX){var b=(a-this.lastX)/this.step;a=this.lastX+Math.round(b)*this.step}-.5>a-this.boundingRect.left&&
(a=this.lastX+Math.ceil((this.boundingRect.left-this.lastX)/this.step)*this.step);.5<a-this.boundingRect.right&&(a=this.lastX+Math.floor((this.boundingRect.right-this.lastX)/this.step)*this.step);this.dynamicLimitRect.left&&a<this.dynamicLimitRect.left&&(a=this.dynamicLimitRect.left);this.dynamicLimitRect.right&&a>this.dynamicLimitRect.right&&(a=this.dynamicLimitRect.right);"function"===typeof this.checkXBeforeRedraw&&!this.checkXBeforeRedraw(a,d)||a==this.lastX||(this.el.nativeElement.style.left=
a-this.zeroLeft-Math.round(this.el.nativeElement.getBoundingClientRect().width/2)+"px",this.lastX=a)}if("vertical"==this.direction||"both"==this.direction)this.lastY&&(b=(d-this.lastY)/this.step,d=this.lastY+Math.round(b)*this.step),-.5>d-this.boundingRect.top&&(d=this.lastY+Math.ceil((this.boundingRect.top-this.lastY)/this.step)*this.step),.5<d-this.boundingRect.bottom&&(d=this.lastY+Math.floor((this.boundingRect.bottom-this.lastY)/this.step)*this.step),this.dynamicLimitRect.top&&d<this.dynamicLimitRect.top&&
(d=this.dynamicLimitRect.top),this.dynamicLimitRect.bottom&&d>this.dynamicLimitRect.bottom&&(d=this.dynamicLimitRect.bottom),"function"===typeof this.checkYBeforeRedraw&&!this.checkYBeforeRedraw(a,d)||d==this.lastY||(this.el.nativeElement.style.top=d-this.zeroTop-Math.round(this.el.nativeElement.getBoundingClientRect().height/2)+"px",this.lastY=d);this.slidingEvent.emit(this.prepareEventData("sliding"))};b.prototype.slideStop=function(a){this.stopSlidingEvent.emit(this.prepareEventData("stop"));document.onmousemove=
null;document.onmouseup=null;if(this.backupStyle){for(var d in this.backupStyle)this.renderer.setElementStyle(this.el.nativeElement,d,this.backupStyle[d]);this.el.nativeElement.style.left=this.lastX-this.zeroLeft-Math.round(this.el.nativeElement.getBoundingClientRect().width/2)+"px";this.el.nativeElement.style.top=this.lastY-this.zeroTop-Math.round(this.el.nativeElement.getBoundingClientRect().height/2)+"px"}};b.prototype.prepareEventData=function(a){a=new k(a,this);a.boundingRect=this.el.nativeElement.getBoundingClientRect();
a.relativePercentHorisontal=Math.round(100*(a.boundingRect.left+Math.round(a.boundingRect.width/2)-this.boundingRect.left)/(this.boundingRect.right-this.boundingRect.left));a.relativePercentVertical=Math.round(100*(a.boundingRect.top+Math.round(a.boundingRect.height/2)-this.boundingRect.top)/(this.boundingRect.bottom-this.boundingRect.top));a.elementId=this.el.nativeElement.id;return a};b.prototype.calcMargins=function(){for(var a in this.signatures){var d=void 0,b=void 0,b=this.splitSignature(this.signatures[a]),
d=b[0],b=b[1];if(!b){if("top"==a||"bottom"==a)b="center-y";if("left"==a||"right"==a)b="center-x"}d=this.getMargin(d,b);this.boundingRect[a]=d}};b.prototype.calcDynamicLimits=function(){for(var a in this.dynamicLimits)if(this.dynamicLimits[a]){var b=void 0,c=void 0,c=this.splitSignature(this.dynamicLimits[a]),b=c[0],c=c[1];if(!c){if("top"==a||"bottom"==a)c="center-y";if("left"==a||"right"==a)c="center-x"}b=this.getMargin(b,c);this.dynamicLimitRect[a]=b}};b.prototype.splitSignature=function(a){var b=
a.split(":",2);a=b[1];""==b[0]?b=this.el.nativeElement.parentElement:(b=document.getElementById(b[0]),b||(b=this.el.nativeElement.parentElement));return[b||null,a||null]};b.prototype.getMargin=function(a,b){var c=a.getBoundingClientRect();b=b.toLowerCase();switch(b){case "left":case "right":case "top":case "bottom":c=c[b];break;case "center-x":c=c.left+Math.round(c.width/2);break;case "center-y":c=c.top+Math.round(c.height/2);break;default:c=null}return c};f([c.Input("slideDirection"),e("design:type",
String)],b.prototype,"direction",void 0);f([c.Input(),e("design:type",Object),e("design:paramtypes",[Object])],b.prototype,"boundElement",null);f([c.Input(),e("design:type",String),e("design:paramtypes",[String])],b.prototype,"rightEdge",null);f([c.Input(),e("design:type",String),e("design:paramtypes",[String])],b.prototype,"leftEdge",null);f([c.Input(),e("design:type",String),e("design:paramtypes",[String])],b.prototype,"topEdge",null);f([c.Input(),e("design:type",String),e("design:paramtypes",[String])],
b.prototype,"bottomEdge",null);f([c.Input(),e("design:type",String),e("design:paramtypes",[String])],b.prototype,"dynamicRightLimit",null);f([c.Input(),e("design:type",String),e("design:paramtypes",[String])],b.prototype,"dynamicLeftLimit",null);f([c.Input(),e("design:type",String),e("design:paramtypes",[String])],b.prototype,"dynamicTopLimit",null);f([c.Input(),e("design:type",String),e("design:paramtypes",[String])],b.prototype,"dynamicBottomLimit",null);f([c.Input(),e("design:type",Object)],b.prototype,
"normalStyle",void 0);f([c.Input(),e("design:type",Object)],b.prototype,"slidingStyle",void 0);f([c.Input(),e("design:type",Object)],b.prototype,"step",void 0);f([c.Input(),e("design:type",Object)],b.prototype,"parent",void 0);f([c.Output("onStartSliding"),e("design:type",Object)],b.prototype,"startSlidingEvent",void 0);f([c.Output("onSliding"),e("design:type",Object)],b.prototype,"slidingEvent",void 0);f([c.Output("onStopSliding"),e("design:type",Object)],b.prototype,"stopSlidingEvent",void 0);f([c.Output("onInit"),
e("design:type",Object)],b.prototype,"initEvent",void 0);return b=f([c.Directive({selector:"[slideAble]",host:{"(mousedown)":"slideStart($event)"}}),e("design:paramtypes",[c.ElementRef,c.Renderer])],b)}();l("SlideAbleDirective",m)}}});
